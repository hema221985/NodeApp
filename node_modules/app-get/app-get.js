#!/usr/bin/env node
'use strict';
const _ = require('underscore');
const meow = require('meow');
const downloader = require('./common/downloader');
const download = require('./command/download');
const search = require('./command/search');
const show = require('./command/show');
const assert = require('./common/assert');

const cli = meow(`
	Usage:
	  $ app-get [options] command <parameters...>

	Commands:
	  search <desc>       search app by description
	  download <package>  download app by package
	  show <package>      show package info

	Options:
	  -v --version        print version
	  -h --help           print help message

`, {alias: {
    v: 'version',
    h: 'help'
  }}
);

assert.must(
  cli.input.length > 0 && _.contains(['search', 'download', 'show'], cli.input[0]),
  cli.help);

switch(cli.input[0]) {
  case 'search':
    search.search(cli.input.slice(1), cli);
    break;
  case 'download':
    download.download(cli.input.slice(1), cli);
    break;
  case 'show':
    show.show(cli.input.slice(1), cli);
    break;
}
