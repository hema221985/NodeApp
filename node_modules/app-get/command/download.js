'use strict';

const downloader = require('../common/downloader');
const meow = require('meow');
const assert = require('../common/assert');
const logger = require('../common/logger');

const download = (args, cli) => {

  assert.must(args.length = 1, "command <download> only support one package to be download for now.");

  args.forEach(pkg => {
    downloader.searchPackage(pkg)
      .then(url => {
        logger.info(`${pkg} FETCHED, url: ${url}`);
        downloader.downloadUrl(url, `${pkg}.apk`)
      }, (error => {
        logger.err(`Package ${pkg} not found, ${error}`);
        logger.issue()
      }))
  });
};

module.exports = {
  download
};
